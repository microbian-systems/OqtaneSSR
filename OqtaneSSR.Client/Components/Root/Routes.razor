@using OqtaneSSR.Client.Models
@using OqtaneSSR.Client.Components.Router
@attribute [StreamRendering] // addition of StreamRendering resolves rendering issue after HttpClient calls


<CascadingValue Value="@PageState">
    <SiteRouter OnStateChange="@ChangeState" />
</CascadingValue>

@code {
    [Parameter]
    public string AntiForgeryToken { get; set; }

    [Parameter]
    public string RenderMode { get; set; }

    [Parameter]
    public string Runtime { get; set; }

    [Parameter]
    public int VisitorId { get; set; }

    [Parameter]
    public string RemoteIPAddress { get; set; }

    [Parameter]
    public string AuthorizationToken { get; set; }

    private PageState PageState { get; set; }

    private void ChangeState(PageState pageState)
    {
        PageState = pageState;
        StateHasChanged();
    }
}